<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#FF6B2C">
    <meta name="description" content="Quiz Master Pro - The ultimate study platform built specifically for computer science students">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>Quiz Master Pro</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Monaco Editor for code questions -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    
    <!-- Firebase for multiplayer -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Pyodide for Python code execution -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Loading Quiz Master Pro...</p>
    </div>
    
    <!-- Dropdown Overlay for Mobile -->
    <div id="dropdown-overlay" class="dropdown-overlay"></div>
    
    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Confirmation Dialog -->
    <div id="confirm-dialog" class="modal confirm-dialog">
        <div class="modal-content confirm-content">
            <h3 id="confirm-title">Confirm</h3>
            <p id="confirm-message">Are you sure?</p>
            <div class="confirm-actions">
                <button id="confirm-cancel" class="btn btn-secondary">Cancel</button>
                <button id="confirm-ok" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div id="app" class="app-container">
        
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo" onclick="goHome()">
                    <span class="logo-icon">üéØ</span>
                    <span class="logo-text">Quiz Master Pro</span>
                </div>
                
                <div class="search-container">
                    <input type="text" id="search-input" class="search-input" placeholder="Search quizzes..." oninput="handleSearch(this.value)">
                    <span class="search-icon">üîç</span>
                </div>
                
                <nav class="nav-links">
                    <button class="nav-link active" data-tab="quizzes" onclick="showTab('quizzes')">
                        <span class="nav-icon">üìö</span>
                        <span class="nav-text">Quizzes</span>
                    </button>
                    <button class="nav-link" data-tab="create" onclick="showTab('create')">
                        <span class="nav-icon">‚úèÔ∏è</span>
                        <span class="nav-text">Create</span>
                    </button>
                    <button class="nav-link" data-tab="stats" onclick="showTab('stats')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Stats</span>
                    </button>
                    <button class="nav-link" data-tab="study" onclick="showTab('study')">
                        <span class="nav-icon">üß†</span>
                        <span class="nav-text">Study</span>
                    </button>
                </nav>
                
                <div class="header-actions">
                    <button class="btn btn-icon" onclick="toggleDarkMode()" title="Toggle dark mode">
                        <span id="theme-icon">üåô</span>
                    </button>
                    <div id="user-menu" class="user-menu">
                        <button class="btn btn-ghost" id="user-button">
                            <span id="user-name">Guest</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <button class="mobile-nav-item active" data-tab="quizzes" onclick="showTab('quizzes')">
                <span class="nav-icon">üìö</span>
                <span class="nav-text">Quizzes</span>
            </button>
            <button class="mobile-nav-item" data-tab="create" onclick="showTab('create')">
                <span class="nav-icon">‚úèÔ∏è</span>
                <span class="nav-text">Create</span>
            </button>
            <button class="mobile-nav-item" data-tab="stats" onclick="showTab('stats')">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">Stats</span>
            </button>
            <button class="mobile-nav-item" data-tab="study" onclick="showTab('study')">
                <span class="nav-icon">üß†</span>
                <span class="nav-text">Study</span>
            </button>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Quizzes Tab -->
            <section id="tab-quizzes" class="tab-content active">
                <!-- Filters Bar -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <label for="category-filter">Category:</label>
                        <select id="category-filter" class="filter-select" onchange="handleCategoryFilter(this.value)">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="folder-filter">Folder:</label>
                        <select id="folder-filter" class="filter-select" onchange="handleFolderFilter(this.value)">
                            <option value="">All Folders</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sort-select">Sort:</label>
                        <select id="sort-select" class="filter-select" onchange="handleSort(this.value)">
                            <option value="recent">Recently Used</option>
                            <option value="name">Name A-Z</option>
                            <option value="name-desc">Name Z-A</option>
                            <option value="questions">Most Questions</option>
                            <option value="score">Best Score</option>
                        </select>
                    </div>
                </div>
                
                <!-- In Progress Section -->
                <div id="in-progress-section" class="in-progress-section" style="display: none;">
                    <h3>üìù Continue Where You Left Off</h3>
                    <div id="in-progress-quizzes" class="in-progress-quizzes"></div>
                </div>
                
                <!-- Quiz Grid -->
                <div id="quiz-grid" class="quiz-grid">
                    <!-- Quiz cards will be rendered here -->
                </div>
                
                <!-- Empty State -->
                <div id="empty-state" class="empty-state" style="display: none;">
                    <div class="empty-icon">üì≠</div>
                    <h3>No quizzes found</h3>
                    <p>Create your first quiz or adjust your filters</p>
                    <button class="btn btn-primary" onclick="showTab('create')">Create Quiz</button>
                </div>
            </section>
            
            <!-- Create Tab -->
            <section id="tab-create" class="tab-content">
                <div class="create-container">
                    <h2>Create New Quiz</h2>
                    
                    <div class="create-form">
                        <div class="form-group">
                            <label for="quiz-title">Quiz Title *</label>
                            <input type="text" id="quiz-title" class="form-input" placeholder="Enter quiz title...">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="quiz-category">Category</label>
                                <input type="text" id="quiz-category" class="form-input" placeholder="e.g., CCNA, CompTIA">
                            </div>
                            <div class="form-group">
                                <label for="quiz-folder">Folder</label>
                                <select id="quiz-folder" class="form-select">
                                    <option value="">No Folder</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="quiz-description">Description</label>
                            <textarea id="quiz-description" class="form-textarea" placeholder="Brief description of the quiz..."></textarea>
                        </div>
                        
                        <!-- Creation Mode Toggle -->
                        <div class="creation-mode-toggle">
                            <button class="mode-btn active" data-mode="text" onclick="setCreationMode('text')">
                                üìù Text Import
                            </button>
                            <button class="mode-btn" data-mode="visual" onclick="setCreationMode('visual')">
                                üé® Visual Editor
                            </button>
                        </div>
                        
                        <!-- Text Import Mode -->
                        <div id="text-import-mode" class="creation-mode">
                            <div class="form-group">
                                <label for="quiz-content">Questions (Text Format)</label>
                                <textarea id="quiz-content" class="form-textarea large" placeholder="Paste your questions here...

Format examples:

MULTIPLE CHOICE:
1. What is the capital of France?
a) London
b) Berlin
c) Paris*
d) Madrid

MULTIPLE ANSWER:
2. Which are programming languages? (select all)
[ ] HTML
[x] Python
[x] JavaScript
[ ] CSS

MATCHING:
3. Match the terms:
TCP :: Transmission Control Protocol
UDP :: User Datagram Protocol
IP :: Internet Protocol

FILL IN BLANK:
4. The OSI model has ___ layers.
Answer: 7|seven

CODE:
5. Write a function that returns the sum of two numbers.
```python
def add(a, b):
    # Your code here
    pass
```
Test: add(2, 3) == 5
Test: add(-1, 1) == 0

IOS TERMINAL:
6. Configure the hostname to 'Router1'
Scenario: You are configuring a new Cisco router.
Command: hostname Router1
Command: enable
"></textarea>
                            </div>
                            <div class="format-help">
                                <button class="btn btn-ghost btn-sm" onclick="showFormatHelp()">üìñ Format Help</button>
                            </div>
                        </div>
                        
                        <!-- Visual Editor Mode -->
                        <div id="visual-editor-mode" class="creation-mode" style="display: none;">
                            <div id="visual-questions" class="visual-questions">
                                <!-- Visual question cards will be rendered here -->
                            </div>
                            <button class="btn btn-secondary add-question-btn" onclick="showAddQuestionModal()">
                                ‚ûï Add Question
                            </button>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="previewQuiz()">üëÅÔ∏è Preview</button>
                            <button class="btn btn-primary" onclick="createQuiz()">‚ú® Create Quiz</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Stats Tab -->
            <section id="tab-stats" class="tab-content">
                <div id="stats-container" class="stats-container">
                    <!-- Stats will be rendered here -->
                </div>
            </section>
            
            <!-- Study Tab -->
            <section id="tab-study" class="tab-content">
                <div id="study-container" class="study-container">
                    <!-- Study mode will be rendered here -->
                </div>
            </section>
            
            <!-- Quiz Taking View -->
            <section id="view-quiz" class="view-content" style="display: none;">
                <div class="quiz-header">
                    <button class="btn btn-ghost" onclick="confirmExitQuiz()">
                        ‚Üê Back
                    </button>
                    <div class="quiz-info">
                        <h2 id="quiz-title-display">Quiz Title</h2>
                        <div class="quiz-progress">
                            <span id="question-counter">1 / 10</span>
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz-timer" id="quiz-timer">00:00</div>
                </div>
                
                <div id="question-container" class="question-container">
                    <!-- Question content will be rendered here -->
                </div>
                
                <div class="quiz-navigation">
                    <button id="prev-btn" class="btn btn-secondary" onclick="prevQuestion()" disabled>
                        ‚Üê Previous
                    </button>
                    <div id="question-dots" class="question-dots">
                        <!-- Navigation dots will be rendered here -->
                    </div>
                    <button id="next-btn" class="btn btn-primary" onclick="nextQuestion()">
                        Next ‚Üí
                    </button>
                </div>
            </section>
            
            <!-- Results View -->
            <section id="view-results" class="view-content" style="display: none;">
                <div id="results-container" class="results-container">
                    <!-- Results will be rendered here -->
                </div>
            </section>
            
            <!-- Review View -->
            <section id="view-review" class="view-content" style="display: none;">
                <div class="review-header">
                    <button class="btn btn-ghost" onclick="showResults()">
                        ‚Üê Back to Results
                    </button>
                    <h2>Review Answers</h2>
                </div>
                <div id="review-container" class="review-container">
                    <!-- Review items will be rendered here -->
                </div>
            </section>
            
            <!-- Multiplayer Lobby View -->
            <section id="view-multiplayer-lobby" class="view-content" style="display: none;">
                <div class="multiplayer-lobby">
                    <h2>üéÆ Multiplayer Lobby</h2>
                    <div class="game-code-display">
                        <span>Game Code:</span>
                        <span id="game-code" class="game-code">XXXX</span>
                        <button class="btn btn-icon" onclick="copyGameCode()">üìã</button>
                    </div>
                    <div class="player-list">
                        <h3>Players</h3>
                        <ul id="player-list">
                            <!-- Players will be listed here -->
                        </ul>
                    </div>
                    <div class="lobby-actions">
                        <button id="start-game-btn" class="btn btn-primary" onclick="startMultiplayerGame()" disabled>
                            Start Game
                        </button>
                        <button class="btn btn-danger" onclick="leaveMultiplayerGame()">
                            Leave
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Multiplayer Results View -->
            <section id="view-multiplayer-results" class="view-content" style="display: none;">
                <div id="multiplayer-results" class="multiplayer-results">
                    <!-- Multiplayer results will be rendered here -->
                </div>
            </section>
            
        </main>
    </div>
    
    <!-- Question Modal for Visual Editor -->
    <div id="question-modal" class="modal">
        <div class="modal-content question-modal-content">
            <div class="modal-header">
                <h3 id="question-modal-title">Add Question</h3>
                <button class="btn btn-icon" onclick="closeQuestionModal()">‚úï</button>
            </div>
            <div id="question-modal-body" class="modal-body">
                <!-- Question form will be rendered here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeQuestionModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveQuestionFromModal()">Save Question</button>
            </div>
        </div>
    </div>
    
    <!-- Quiz Options Modal -->
    <div id="quiz-options-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Quiz Options</h3>
                <button class="btn btn-icon" onclick="closeModal('quiz-options-modal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="shuffle-questions" checked>
                        <span>Shuffle Questions</span>
                    </label>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="shuffle-answers" checked>
                        <span>Shuffle Answer Choices</span>
                    </label>
                </div>
                <div class="form-group">
                    <label for="question-limit">Question Limit (0 = all)</label>
                    <input type="number" id="question-limit" class="form-input" value="0" min="0">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="timed-mode">
                        <span>Timed Mode</span>
                    </label>
                </div>
                <div class="form-group" id="time-limit-group" style="display: none;">
                    <label for="time-limit">Time per Question (seconds)</label>
                    <input type="number" id="time-limit" class="form-input" value="30" min="5">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('quiz-options-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="startQuizWithOptions()">Start Quiz</button>
            </div>
        </div>
    </div>
    
    <!-- Multiplayer Join Modal -->
    <div id="multiplayer-join-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üéÆ Join Multiplayer Game</h3>
                <button class="btn btn-icon" onclick="closeModal('multiplayer-join-modal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="join-game-code">Game Code</label>
                    <input type="text" id="join-game-code" class="form-input" placeholder="Enter 4-letter code" maxlength="4" style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <label for="player-name">Your Name</label>
                    <input type="text" id="player-name" class="form-input" placeholder="Enter your name">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('multiplayer-join-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="joinMultiplayerGame()">Join Game</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Quiz Modal -->
    <div id="edit-quiz-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Edit Quiz</h3>
                <button class="btn btn-icon" onclick="closeModal('edit-quiz-modal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-quiz-title">Title</label>
                    <input type="text" id="edit-quiz-title" class="form-input">
                </div>
                <div class="form-group">
                    <label for="edit-quiz-category">Category</label>
                    <input type="text" id="edit-quiz-category" class="form-input">
                </div>
                <div class="form-group">
                    <label for="edit-quiz-description">Description</label>
                    <textarea id="edit-quiz-description" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-quiz-content">Questions</label>
                    <textarea id="edit-quiz-content" class="form-textarea large"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('edit-quiz-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveQuizEdit()">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Format Help Modal -->
    <div id="format-help-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>üìñ Question Format Guide</h3>
                <button class="btn btn-icon" onclick="closeModal('format-help-modal')">‚úï</button>
            </div>
            <div class="modal-body format-help-content">
                <div class="format-section">
                    <h4>Multiple Choice</h4>
                    <pre>1. What is 2 + 2?
a) 3
b) 4*
c) 5
d) 6</pre>
                    <p>Mark correct answer with * after the choice.</p>
                </div>
                
                <div class="format-section">
                    <h4>Multiple Answer</h4>
                    <pre>2. Select all prime numbers:
[ ] 4
[x] 5
[x] 7
[ ] 9</pre>
                    <p>Use [x] for correct answers, [ ] for incorrect.</p>
                </div>
                
                <div class="format-section">
                    <h4>Matching</h4>
                    <pre>3. Match the capitals:
France :: Paris
Germany :: Berlin
Italy :: Rome</pre>
                    <p>Use :: to separate terms from definitions.</p>
                </div>
                
                <div class="format-section">
                    <h4>Fill in the Blank</h4>
                    <pre>4. The sun rises in the ___.
Answer: east|East</pre>
                    <p>Use | to separate acceptable alternatives.</p>
                </div>
                
                <div class="format-section">
                    <h4>Code Question</h4>
                    <pre>5. Write a function to add two numbers.
```python
def add(a, b):
    pass
```
Test: add(1, 2) == 3
Test: add(-1, 1) == 0</pre>
                    <p>Include test cases to validate the code.</p>
                </div>
                
                <div class="format-section">
                    <h4>IOS Terminal</h4>
                    <pre>6. Enter privileged EXEC mode.
Scenario: You are at the user prompt.
Command: enable</pre>
                    <p>List expected commands with Command: prefix.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal('format-help-modal')">Got it!</button>
            </div>
        </div>
    </div>
    
    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas" class="confetti-canvas"></canvas>
    
    <!-- Application Script -->
    <script src="/static/app.js"></script>
</body>
</html>